{"version":3,"sources":["webpack://@justoverclock/flarum-ext-infocards/webpack/bootstrap","webpack://@justoverclock/flarum-ext-infocards/./forum.js","webpack://@justoverclock/flarum-ext-infocards/./src/forum/index.js","webpack://@justoverclock/flarum-ext-infocards/external \"flarum.core.compat['app']\"","webpack://@justoverclock/flarum-ext-infocards/external \"flarum.core.compat['common/extend']\"","webpack://@justoverclock/flarum-ext-infocards/external \"flarum.core.compat['common/helpers/username']\"","webpack://@justoverclock/flarum-ext-infocards/external \"flarum.core.compat['components/AvatarEditor']\"","webpack://@justoverclock/flarum-ext-infocards/external \"flarum.core.compat['components/IndexPage']\"","webpack://@justoverclock/flarum-ext-infocards/external \"flarum.core.compat['helpers/listItems']\"","webpack://@justoverclock/flarum-ext-infocards/external \"flarum.core.compat['utils/formatNumber']\""],"names":["app","initializers","add","extend","IndexPage","prototype","vdom","user","session","children","splice","insert","m","translator","trans","AvatarEditor","component","username","listItems","badges","toArray","formatNumber","discussionCount","commentCount","id","countVisit","document","getElementById","apik","forum","attribute","updateVisitCount","fetch","then","res","json","innerHTML","value","monthNames","dayNames","checkTime","date","Date","sufix","hours","getHours","slice","minutes","getMinutes","day","getDate","month","getMonth","weekday","getDay","setInterval"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","/*\n * This file is part of justoverclock/flarum-ext-infocards.\n *\n * Copyright (c) 2021 Marco Colia.\n * https://flarum.it\n *\n * For the full copyright and license information, please view the LICENSE.md\n * file that was distributed with this source code.\n */\n\nimport { extend } from 'flarum/common/extend';\nimport app from 'flarum/app';\nimport IndexPage from 'flarum/components/IndexPage';\nimport username from 'flarum/common/helpers/username';\nimport formatNumber from 'flarum/utils/formatNumber';\nimport listItems from 'flarum/helpers/listItems';\nimport AvatarEditor from 'flarum/components/AvatarEditor';\n\n/* global m */\n\napp.initializers.add('justoverclock/flarum-ext-infocards', () => {\n  extend(IndexPage.prototype, 'view', function (vdom) {\n    const user = app.session.user;\n    if (app.session.user)\n      if (vdom.children && vdom.children.splice) {\n        const insert = m('div', { class: 'containersocial' }, [\n          m('div', { class: 'card card-2' }, [\n            m('h3', { class: 'textone' }, app.translator.trans('flarum-ext-infocards.forum.welcome_back')),\n            m('div', { class: 'avataric' }, AvatarEditor.component({ user })),\n            m('p', { class: 'textone' }, m('strong', username(user))),\n            m('p', app.translator.trans('flarum-ext-infocards.forum.groups'), ':'),\n            m('div', { class: 'icocont' }, m('div', { class: 'iconbadge' }, listItems(user.badges().toArray()))),\n          ]),\n          m('div', { class: 'card card-2' }, [\n            m('h3', { class: 'fontic2' }, app.translator.trans('flarum-ext-infocards.forum.forumstats')),\n            m('p', app.translator.trans('flarum-ext-infocards.forum.totdisc'), ': ', m('b', formatNumber(user.discussionCount()))),\n            m('p', app.translator.trans('flarum-ext-infocards.forum.totalpost'), ':'),\n            m('div', { class: 'numbercount' }, m('span', formatNumber(user.commentCount()))),\n          ]),\n          m('div', { class: 'card card-2' }, [\n            m('h3', { class: 'fontic3' }, app.translator.trans('flarum-ext-infocards.forum.geninfo')),\n            m('div', { class: 'time', id: 'time' }),\n            m('p', app.translator.trans('flarum-ext-infocards.forum.wasviewed')),\n            m('div', { class: 'numbercount' }, m('span', { id: 'count' }), ' ', app.translator.trans('flarum-ext-infocards.forum.times')),\n          ]),\n        ]);\n        vdom.children.splice(1, 0, insert);\n      }\n  });\n  extend(IndexPage.prototype, 'oncreate', function () {\n    const countVisit = document.getElementById('count');\n    const apik = app.forum.attribute('ApiKey');\n    updateVisitCount();\n\n    function updateVisitCount() {\n      fetch(apik)\n        .then((res) => res.json())\n        .then((res) => {\n          countVisit.innerHTML = res.value;\n        });\n    }\n  });\n  extend(IndexPage.prototype, 'oncreate', function () {\n    var monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    var dayNames = [\n      app.translator.trans('flarum-ext-infocards.forum.sunday'),\n      app.translator.trans('flarum-ext-infocards.forum.monday'),\n      app.translator.trans('flarum-ext-infocards.forum.tuesday'),\n      app.translator.trans('flarum-ext-infocards.forum.wednesday'),\n      app.translator.trans('flarum-ext-infocards.forum.thursday'),\n      app.translator.trans('flarum-ext-infocards.forum.friday'),\n      app.translator.trans('flarum-ext-infocards.forum.saturday'),\n    ];\n    function checkTime() {\n      var date = new Date();\n      var sufix = '';\n      var hours = ('0' + date.getHours()).slice(-2);\n      var minutes = ('0' + date.getMinutes()).slice(-2);\n      var day = date.getDate();\n      var month = monthNames[date.getMonth()];\n      var weekday = dayNames[date.getDay()];\n      if (day > 3 && day < 21) sufix = 'th';\n      switch (day % 10) {\n        case 1:\n          sufix = 'st';\n        case 2:\n          sufix = 'nd';\n        case 3:\n          sufix = 'rd';\n        default:\n          sufix = 'th';\n      }\n      document.getElementById('time').innerHTML =\n        \"  It's <span class='hour'>\" + hours + ':' + minutes + \"</span><br/><span class='date'>\" + month + ' ' + day + sufix + ', ' + weekday + '.';\n    }\n    setInterval(checkTime(), 1000);\n  });\n});\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/helpers/username'];","module.exports = flarum.core.compat['components/AvatarEditor'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['utils/formatNumber'];"],"sourceRoot":""}